from sqlalchemy import Table, Column, MetaData, Float, String, Date, DateTime, Integer, Text

_metadata = MetaData()


EquityInfo = Table(
    'EquityInfo', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('name', String(collation='utf8')),
    Column('sector', String(collation='utf8')),
    Column('industry', String(collation='utf8')),
    Column('summary', Text(collation='utf8')),
)

# Daily equity historical price
EquityHP = Table(
    'EquityHP', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('date', Date(), primary_key=True),
    Column('open', Float()),
    Column('high', Float()),
    Column('low', Float()),
    Column('close', Float()),
    Column('volume', Float()),
    Column('ex_dividend', Float()),
    Column('split_ratio', Float()),
    Column('adj_open', Float()),
    Column('adj_high', Float()),
    Column('adj_low', Float()),
    Column('adj_close', Float()),
    Column('adj_volume', Float())
)
EquityHP_flds = list(EquityHP.columns.keys())
EquityHP_idxs = {name: idx for idx, name in enumerate(EquityHP.columns.keys())}


# Equity real time quote
EquityQuote = Table(
    'EquityQuote', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('time', DateTime(), primary_key=True),
    Column('price', Float()),
    Column('change', Float()),
    Column('pct_change', Float()),
    Column('volume', Float()),
    Column('avg_volume', Float()),
    Column('name', String(collation='utf8')),
    Column('exchange', String(collation='utf8')),
    Column('market_cap', Float()),
    Column('day_high', Float()),
    Column('day_low', Float()),
    Column('year_high', Float()),
    Column('year_low', Float())
)
EquityQuote_flds = list(EquityQuote.columns.keys())


# Position historical record
Position = Table(
    'Position', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('date', Date(), primary_key=True),
    Column('share', Float()),
    Column('price', Float()),
    Column('value', Float()),
    Column('cost', Float()),
    Column('pct_ret', Float()),
    Column('abs_ret', Float())
)
Position_flds = list(Position.columns.keys())


# Order record
Order = Table(
    'Order', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('date', Date(), primary_key=True),
    Column('share', Float()),
    Column('price', Float()),
    Column('fee', Float()),
    Column('total', Float())
)
Order_flds = list(Order.columns.keys())


# Equity daily technical indicator
EquityInd = Table(
    'EquityInd1d', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('date', Date(), primary_key=True),
    Column('indicator', String(collation='utf8'), primary_key=True),
    Column('val', Float())
)
EquityInd_flds = list(EquityInd.columns.keys())


EquityFinIS = Table(
    'EquityFinIS', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('year', Integer(), primary_key=True),
    Column('period', String(collation='utf8'), primary_key=True),
    Column('operatingrevenue', Float()),
    Column('loansandleaseinterestincome', Float()),
    Column('investmentsecuritiesinterestincome', Float()),
    Column('depositsinterestincome', Float()),
    Column('fedfundsandrepointerestincome', Float()),
    Column('tradingaccountinterestincome', Float()),
    Column('otherinterestincome', Float()),
    Column('depositsinterestexpense', Float()),
    Column('shorttermborrowinginterestexpense', Float()),
    Column('longtermdebtinterestexpense', Float()),
    Column('fedfundsandrepointerestexpense', Float()),
    Column('capitalizedleaseobligationinterestexpense', Float()),
    Column('otherinterestexpense', Float()),
    Column('netinterestincome', Float()),
    Column('trustfeeincome', Float()),
    Column('servicechargesondepositsincome', Float()),
    Column('otherservicechargeincome', Float()),
    Column('netrealizedcapitalgains', Float()),
    Column('premiumsearned', Float()),
    Column('investmentbankingincome', Float()),
    Column('othernoninterestincome', Float()),
    Column('totalnoninterestincome', Float()),
    Column('otherrevenue', Float()),
    Column('totalrevenue', Float()),
    Column('operatingcostofrevenue', Float()),
    Column('othercostofrevenue', Float()),
    Column('totalcostofrevenue', Float()),
    Column('totalgrossprofit', Float()),
    Column('sgaexpense', Float()),
    Column('salariesandemployeebenefitsexpense', Float()),
    Column('marketingexpense', Float()),
    Column('rdexpense', Float()),
    Column('provisionforcreditlosses', Float()),
    Column('netoccupancyequipmentexpense', Float()),
    Column('explorationexpense', Float()),
    Column('propertyliabilityinsuranceclaims', Float()),
    Column('policyacquisitioncosts', Float()),
    Column('amortizationofdeferredpolicyacquisitioncosts', Float()),
    Column('currentandfuturebenefits', Float()),
    Column('depreciationexpense', Float()),
    Column('amortizationexpense', Float()),
    Column('depletionexpense', Float()),
    Column('otheroperatingexpenses', Float()),
    Column('impairmentexpense', Float()),
    Column('restructuringcharge', Float()),
    Column('otherspecialcharges', Float()),
    Column('totalnoninterestexpense', Float()),
    Column('totaloperatingexpenses', Float()),
    Column('totaloperatingincome', Float()),
    Column('totalinterestexpense', Float()),
    Column('totalinterestincome', Float()),
    Column('otherincome', Float()),
    Column('totalotherincome', Float()),
    Column('nonoperatingincome', Float()),
    Column('totalpretaxincome', Float()),
    Column('incometaxexpense', Float()),
    Column('othergains', Float()),
    Column('netincomecontinuing', Float()),
    Column('netincomediscontinued', Float()),
    Column('extraordinaryincome', Float()),
    Column('otheradjustmentstoconsolidatednetincome', Float()),
    Column('netincome', Float()),
    Column('preferreddividends', Float()),
    Column('netincometononcontrollinginterest', Float()),
    Column('otheradjustmentstonetincometocommon', Float()),
    Column('netincometocommon', Float()),
    Column('weightedavebasicsharesos', Float()),
    Column('basiceps', Float()),
    Column('weightedavedilutedsharesos', Float()),
    Column('dilutedeps', Float()),
    Column('weightedavebasicdilutedsharesos', Float()),
    Column('basicdilutedeps', Float()),
    Column('cashdividendspershare', Float())
)


EquityFinBS = Table(
    'EquityFinBS', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('year', Integer(), primary_key=True),
    Column('period', String(collation='utf8'), primary_key=True),
    Column('cashandequivalents', Float()),
    Column('restrictedcash', Float()),
    Column('fedfundssold', Float()),
    Column('interestbearingdepositsatotherbanks', Float()),
    Column('timedepositsplaced', Float()),
    Column('tradingaccountsecurities', Float()),
    Column('shortterminvestments', Float()),
    Column('loansandleases', Float()),
    Column('allowanceforloanandleaselosses', Float()),
    Column('netloansandleases', Float()),
    Column('loansheldforsale', Float()),
    Column('accruedinvestmentincome', Float()),
    Column('notereceivable', Float()),
    Column('accountsreceivable', Float()),
    Column('customerandotherreceivables', Float()),
    Column('netpremisesandequipment', Float()),
    Column('netinventory', Float()),
    Column('prepaidexpenses', Float()),
    Column('currentdeferredtaxassets', Float()),
    Column('othercurrentassets', Float()),
    Column('othercurrentnonoperatingassets', Float()),
    Column('totalcurrentassets', Float()),
    Column('grossppe', Float()),
    Column('accumulateddepreciation', Float()),
    Column('netppe', Float()),
    Column('longterminvestments', Float()),
    Column('noncurrentnotereceivables', Float()),
    Column('goodwill', Float()),
    Column('intangibleassets', Float()),
    Column('noncurrentdeferredtaxassets', Float()),
    Column('employeebenefitassets', Float()),
    Column('mortgageservicingrights', Float()),
    Column('unearnedpremiumsdebit', Float()),
    Column('deferredacquisitioncost', Float()),
    Column('separateaccountbusinessassets', Float()),
    Column('othernoncurrentassets', Float()),
    Column('othernoncurrentnonoperatingassets', Float()),
    Column('totalnoncurrentassets', Float()),
    Column('otherassets', Float()),
    Column('totalassets', Float()),
    Column('shorttermdebt', Float()),
    Column('noninterestbearingdeposits', Float()),
    Column('interestbearingdeposits', Float()),
    Column('fedfundspurchased', Float()),
    Column('bankersacceptances', Float()),
    Column('accountspayable', Float()),
    Column('othershorttermpayables', Float()),
    Column('accruedinterestpayable', Float()),
    Column('accruedexpenses', Float()),
    Column('customerdeposits', Float()),
    Column('dividendspayable', Float()),
    Column('currentdeferredrevenue', Float()),
    Column('currentdeferredtaxliabilities', Float()),
    Column('currentemployeebenefitliabilities', Float()),
    Column('othertaxespayable', Float()),
    Column('othercurrentliabilities', Float()),
    Column('othercurrentnonoperatingliabilities', Float()),
    Column('totalcurrentliabilities', Float()),
    Column('longtermdebt', Float()),
    Column('capitalleaseobligations', Float()),
    Column('claimsandclaimexpenses', Float()),
    Column('futurepolicybenefits', Float()),
    Column('assetretirementandlitigationobligation', Float()),
    Column('unearnedpremiumscredit', Float()),
    Column('policyholderfunds', Float()),
    Column('participatingpolicyholderequity', Float()),
    Column('separateaccountbusinessliabilities', Float()),
    Column('noncurrentdeferredrevenue', Float()),
    Column('noncurrentdeferredtaxliabilities', Float()),
    Column('noncurrentemployeebenefitliabilities', Float()),
    Column('othernoncurrentliabilities', Float()),
    Column('othernoncurrentnonoperatingliabilities', Float()),
    Column('otherlongtermliabilities', Float()),
    Column('totalnoncurrentliabilities', Float()),
    Column('totalliabilities', Float()),
    Column('commitmentsandcontingencies', Float()),
    Column('redeemablenoncontrollinginterest', Float()),
    Column('totalpreferredequity', Float()),
    Column('commonequity', Float()),
    Column('retainedearnings', Float()),
    Column('treasurystock', Float()),
    Column('aoci', Float()),
    Column('otherequity', Float()),
    Column('totalcommonequity', Float()),
    Column('totalequity', Float()),
    Column('noncontrollinginterests', Float()),
    Column('totalequityandnoncontrollinginterests', Float()),
    Column('totalliabilitiesandequity', Float())
)


EquityFinCF = Table(
    'EquityFinCF', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('year', Integer(), primary_key=True),
    Column('period', String(collation='utf8'), primary_key=True),
    Column('netincome', Float()),
    Column('netincomediscontinued', Float()),
    Column('netincomecontinuing', Float()),
    Column('provisionforloanlosses', Float()),
    Column('depreciationexpense', Float()),
    Column('amortizationexpense', Float()),
    Column('noncashadjustmentstonetincome', Float()),
    Column('increasedecreaseinoperatingcapital', Float()),
    Column('netcashfromcontinuingoperatingactivities', Float()),
    Column('netcashfromdiscontinuedoperatingactivities', Float()),
    Column('netcashfromoperatingactivities', Float()),
    Column('purchaseofplantpropertyandequipment', Float()),
    Column('acquisitions', Float()),
    Column('purchaseofinvestments', Float()),
    Column('saleofplantpropertyandequipment', Float()),
    Column('divestitures', Float()),
    Column('saleofinvestments', Float()),
    Column('netincreaseinfedfundssold', Float()),
    Column('loansheldforsalenet', Float()),
    Column('otherinvestingactivitiesnet', Float()),
    Column('netcashfromcontinuinginvestingactivities', Float()),
    Column('netcashfromdiscontinuedinvestingactivities', Float()),
    Column('netcashfrominvestingactivities', Float()),
    Column('netchangeindeposits', Float()),
    Column('issuanceofdebt', Float()),
    Column('issuanceofpreferredequity', Float()),
    Column('issuanceofcommonequity', Float()),
    Column('repaymentofdebt', Float()),
    Column('repurchaseofpreferredequity', Float()),
    Column('repurchaseofcommonequity', Float()),
    Column('paymentofdividends', Float()),
    Column('otherfinancingactivitiesnet', Float()),
    Column('netcashfromcontinuingfinancingactivities', Float()),
    Column('netcashfromdiscontinuedfinancingactivities', Float()),
    Column('netcashfromfinancingactivities', Float()),
    Column('effectofexchangeratechanges', Float()),
    Column('othernetchangesincash', Float()),
    Column('netchangeincash', Float()),
    Column('cashinterestpaid', Float()),
    Column('cashinterestreceived', Float()),
    Column('cashincometaxespaid', Float())
)


EquityFinFund = Table(
    'EquityFinFund', _metadata,
    Column('symbol', String(collation='utf8'), primary_key=True),
    Column('year', Integer(), primary_key=True),
    Column('period', String(collation='utf8'), primary_key=True),
    Column('altmanzscore', Float()),
    Column('apturnover', Float()),
    Column('arturnover', Float()),
    Column('assetturnover', Float()),
    Column('augmentedpayoutratio', Float()),
    Column('bookvaluepershare', Float()),
    Column('capex', Float()),
    Column('ccc', Float()),
    Column('commontocap', Float()),
    Column('compoundleveragefactor', Float()),
    Column('costofrevtorevenue', Float()),
    Column('croic', Float()),
    Column('currentratio', Float()),
    Column('debt', Float()),
    Column('debttoebitda', Float()),
    Column('debttoequity', Float()),
    Column('debttonopat', Float()),
    Column('debttototalcapital', Float()),
    Column('depreciationandamortization', Float()),
    Column('dfcfnwc', Float()),
    Column('dfcfnwctorev', Float()),
    Column('dfnwc', Float()),
    Column('dfnwctorev', Float()),
    Column('dio', Float()),
    Column('dividendyield', Float()),
    Column('divpayoutratio', Float()),
    Column('dpo', Float()),
    Column('dso', Float()),
    Column('earningsyield', Float()),
    Column('ebit', Float()),
    Column('ebitda', Float()),
    Column('ebitdagrowth', Float()),
    Column('ebitdamargin', Float()),
    Column('ebitdaqoqgrowth', Float()),
    Column('ebitgrowth', Float()),
    Column('ebitlesscapextointerestex', Float()),
    Column('ebitmargin', Float()),
    Column('ebitqoqgrowth', Float()),
    Column('ebittointerestex', Float()),
    Column('efftaxrate', Float()),
    Column('enterprisevalue', Float()),
    Column('epsgrowth', Float()),
    Column('epsqoqgrowth', Float()),
    Column('evtoebit', Float()),
    Column('evtoebitda', Float()),
    Column('evtofcff', Float()),
    Column('evtoinvestedcapital', Float()),
    Column('evtonopat', Float()),
    Column('evtoocf', Float()),
    Column('evtorevenue', Float()),
    Column('faturnover', Float()),
    Column('fcffgrowth', Float()),
    Column('fcffqoqgrowth', Float()),
    Column('fcfftointerestex', Float()),
    Column('finleverage', Float()),
    Column('freecashflow', Float()),
    Column('grossmargin', Float()),
    Column('interestburdenpct', Float()),
    Column('investedcapital', Float()),
    Column('investedcapitalgrowth', Float()),
    Column('investedcapitalincreasedecrease', Float()),
    Column('investedcapitalqoqgrowth', Float()),
    Column('investedcapitalturnover', Float()),
    Column('invturnover', Float()),
    Column('leverageratio', Float()),
    Column('ltdebtandcapleases', Float()),
    Column('ltdebttocap', Float()),
    Column('ltdebttoebitda', Float()),
    Column('ltdebttoequity', Float()),
    Column('ltdebttonopat', Float()),
    Column('marketcap', Float()),
    Column('netdebt', Float()),
    Column('netdebttoebitda', Float()),
    Column('netdebttonopat', Float()),
    Column('netincomegrowth', Float()),
    Column('netincomeqoqgrowth', Float()),
    Column('netnonopex', Float()),
    Column('netnonopobligations', Float()),
    Column('nnep', Float()),
    Column('noncontrolinttocap', Float()),
    Column('noncontrollinginterestsharingratio', Float()),
    Column('nopat', Float()),
    Column('nopatgrowth', Float()),
    Column('nopatlesscapextointex', Float()),
    Column('nopatmargin', Float()),
    Column('nopatqoqgrowth', Float()),
    Column('nopattointerestex', Float()),
    Column('normalizednopat', Float()),
    Column('normalizednopatmargin', Float()),
    Column('nwc', Float()),
    Column('nwctorev', Float()),
    Column('ocfgrowth', Float()),
    Column('ocflesscapextointerestex', Float()),
    Column('ocfqoqgrowth', Float()),
    Column('ocftocapex', Float()),
    Column('ocftointerestex', Float()),
    Column('operatingmargin', Float()),
    Column('opextorevenue', Float()),
    Column('oroa', Float()),
    Column('preferredtocap', Float()),
    Column('pretaxincomemargin', Float()),
    Column('pricetobook', Float()),
    Column('pricetoearnings', Float()),
    Column('pricetorevenue', Float()),
    Column('pricetotangiblebook', Float()),
    Column('profitmargin', Float()),
    Column('quickratio', Float()),
    Column('rdextorevenue', Float()),
    Column('revenuegrowth', Float()),
    Column('revenueqoqgrowth', Float()),
    Column('rnnoa', Float()),
    Column('roa', Float()),
    Column('roce', Float()),
    Column('roe', Float()),
    Column('roic', Float()),
    Column('roicnnepspread', Float()),
    Column('sgaextorevenue', Float()),
    Column('stdebttocap', Float()),
    Column('tangbookvaluepershare', Float()),
    Column('taxburdenpct', Float()),
    Column('totalcapital', Float())
)